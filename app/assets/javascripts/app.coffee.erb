'use strict'

@app = angular.module 'projectApp', ['ngSanitize', 'ngRoute']
  .config ($routeProvider, $locationProvider, $httpProvider) ->
    $routeProvider
      .when '/', {
        templateUrl: "<%= asset_path('templates/home.html') %>" }
      .when '/log_in', {
        templateUrl: "<%= asset_path('templates/log_in.html') %>"
        controller: 'LogInCtrl'
        controllerAs: 'logIn' }
      .when '/sign_up', {
        templateUrl: "<%= asset_path('templates/sign_up.html') %>"
        controller: 'SignUpCtrl'
        controllerAs: 'signUp' }
      .when '/tasks', {
        templateUrl: "<%= asset_path('templates/tasks.html') %>"
        controller: 'TasksCtrl'
        controllerAs: 'tasks' }
      .when '/tasks/new', {
        templateUrl: "<%= asset_path('templates/tasks_form.html') %>"
        controller: 'TasksNewCtrl'
        controllerAs: 'task' }
      .when '/tasks/edit/:taskId', {
        templateUrl: "<%= asset_path('templates/tasks_form.html') %>"
        controller: 'TasksEditCtrl'
        controllerAs: 'task' }
      .when '/tasks/export/:from/:to', {
        templateUrl: "<%= asset_path('templates/tasks_export.html') %>"
        controller: 'TasksExportCtrl'
        controllerAs: 'tasksExport' }
      .when '/settings', {
        templateUrl: "<%= asset_path('templates/settings.html') %>"
        controller: 'SettingsCtrl'
        controllerAs: 'settings' }
      .when '/admin/users', {
        templateUrl: "<%= asset_path('templates/admin/users.html') %>"
        controller: 'AdminUsersCtrl'
        controllerAs: 'adminUsers' }
      .when '/admin/tasks', {
        templateUrl: "<%= asset_path('templates/admin/tasks.html') %>"
        controller: 'AdminTasksCtrl'
        controllerAs: 'adminTasks' }
      .otherwise {
        redirectTo: '/' }

    $locationProvider.html5Mode(true)

    $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest'
